<%- include('./layouts/header'); -%>
<%- include('./layouts/navbar-all'); -%>

<section id="main" class="lg:w-[1100px] lg:px-0 px-[5%] m-auto pb-28">
    <p id="header-firstname" class="lg:pb-3 lg:pt-8 py-5 text-main text-xl font-bold">Hi i'am, <span class="firstname"></span></p>

    <div id="main" class="lg:grid lg:grid-cols-[1fr_.6fr] lg:gap-5">
        <div class="flex flex-col gap-5 lg:gap-4">

            <!-- BASIC INFORMATION -->
            <div class="basic-info rounded-2xl overflow-hidden shadow-md border-2 border-main">
                <div class="lg:w-100 bg-main flex items-center justify-between px-5 py-3">
                    <p class="text-white flex items-center gap-2"><i class="uil uil-info-circle"></i> INFORMASI BASIC</p>
                </div>
                <div class="lg:w-100 p-5 pb-6 bg-white noise lg:rounded-none border-2 lg:border-0 border-header">
                    <div class="lg:flex lg:items-start lg:gap-5">
                        <div class="w-[88px] h-[88px] min-w-[88px] min-h-[88px] rounded-full overflow-hidden mx-auto lg:mx-0">
                            <img id="basic-profile-pic" src="" onerror="src='/img/no-profile.jpg'" alt="profile-picture" class="w-full h-full object-cover">
                        </div>
                        <div class="w-full">
                            <div class="mb-4 text-center lg:text-left">
                                <p id="basic-fullname" class="font-bold text-xl text-main">Assami Muzaki</p>
                                <p id="basic-headline" class="text-sm text-thrid/60 font-medium">Founder of Internshits</p>
                            </div>
                            <hr>
                            <div class="grid grid-cols-2 w-full gap-3 pt-4 text-white">
                                <div class="col-span-2">
                                    <span class="text-thrid/60 font-medium text-sm">EMAIL</span>
                                    <p id="basic-email" class="text-second/80 font-second font-medium text-sm">assamim80@gmail.com</p>
                                </div>
                                <div class="">
                                    <span class="text-thrid/60 font-medium text-sm">NO HP</span>
                                    <p id="basic-mobile" class="text-second/80 font-second font-medium text-sm">085712062191</p>
                                </div>
                                <div class="">
                                    <span class="text-thrid/60 font-medium text-sm">TANGGAL LAHIR</span>
                                    <p id="basic-birthdate" class="text-second/80 font-second font-medium text-sm">18 Oktober 2001</p>
                                </div>
                                <div class="">
                                    <span class="text-thrid/60 font-medium text-sm">KELAMIN</span>
                                    <p id="basic-sex" class="text-second/80 font-second font-medium text-sm">Laki-Laki</p>
                                </div>
                                <div class="">
                                    <span class="text-thrid/60 font-medium text-sm">DOMISILI</span>
                                    <p id="basic-domicile" class="text-second/80 font-second font-medium text-sm">Jakarta</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROFILE SUMMARY -->
            <div class="profile-summary rounded-2xl overflow-hidden shadow-md border-2 border-main">
                <div class="w-100 bg-main flex items-center justify-between px-5 py-3">
                    <p class="text-white flex items-center gap-2"><i class="uil uil-user"></i> RINGKASAN PROFIL</p>
                </div>
                <div id="profile-summary" class="w-full p-5 pb-6 noise bg-white border-2 lg:border-0 border-header lg:rounded-b-2xl">
                    <div id="off-summary" class="text-center">
                        <p class="font-bold text-base text-main mb-3">Tulis ringkasan profil kamu disini!</p>
                        <p class="font-second text-black/80 text-sm font-medium px-2 lg:px-24 mb-5 lg:mb-2">Ini kesempatan bagus untuk menunjukan siapa diri kamu secara ringkas, sehingga orang lain mendapatkan gambaran tentang dirimu.</p>
                        <button id="button-profile-summary" class="flex items-center gap-1 bg-main text-white rounded-lg text-sm py-2 px-4 m-auto mt-4">Tambahkan ringkasan profil
                        </button>
                    </div>
                    <div id="on-summary" class="">
                        <p id="profile-summary-text"></p>
                    </div>
                </div>
            </div>

            <!-- MOBILE --- ATTACHMENT -->
            <div class="lg:hidden attachments bg-white border-main border-2 noise rounded-2xl p-4 pb-6 shadow-md">
                <div class="w-100 flex items-center justify-between rounded-t-2xl">
                    <p class="text-main flex items-center gap-2"><i class="uil uil-file-alt"></i> LAMPIRAN</p>
                </div>
                <p class="font-second text-sm font-semibold text-black/80 mt-3 mb-4">Kamu bisa menambahkan CV dan Portfolio terbarumu disini!</p>
                <div class="mt-4">
                    <div class="attachment-body-resume">
                        <a href="" class="resume block flex items-center justify-center bg-main text-white font-medium text-sm py-3 w-full mt-3 rounded-lg gap-2"><i class="uil uil-external-link-alt"></i> Lihat Curriculum Vitae (CV)</a>
                    </div>
                    <div class="mt-3 attachment-body-portfolio">
                        <a href="" class="portfolio block flex items-center justify-center bg-main text-white font-medium text-sm py-3 w-full mt-3 rounded-lg gap-2"><i class="uil uil-external-link-alt"></i> Lihat Portfolio</a>
                    </div>
                </div>
            </div>

            <!-- MOBILE --- SOCIALS -->
            <div class="lg:hidden socials bg-white border-main border-2 noise rounded-2xl p-4 pb-5 shadow-md">
                <div class="w-100 flex items-center justify-between rounded-t-2xl">
                    <p class="text-main flex items-center gap-2"><i class="uil uil-share"></i> SOSIAL</p>
                </div>
                <p class="font-second text-sm font-semibold text-black/80 mt-3 mb-4">Kunjungi sosial media profil ini untuk berkoneksi lebih jauh!</p>
                <div id="" class="socials hidden flex items-center gap-4 text-thrid/80 text-4xl">
                    <a id="" href="" target="_blank" class="link-twitter hidden link-social"><i class="uil uil-twitter"></i></a>
                    <a id="" href="" target="_blank" class="link-instagram hidden link-social"><i class="uil uil-instagram-alt"></i></a>
                    <a id="" href="" target="_blank" class="link-linkedin hidden link-social"><i class="uil uil-linkedin"></i></a>
                    <a id="" href="" target="_blank" class="link-behance hidden link-social"><i class="uil uil-behance"></i></a>
                    <a id="" href="" target="_blank" class="link-github hidden link-social"><i class="uil uil-github"></i></a>
                    <a id="" href="" target="_blank" class="link-youtube hidden link-social"><i class="uil uil-youtube"></i></a>
                </div>
            </div>

            <!-- PROFILE EXPERIENCES -->
            <div class="experiences rounded-2xl overflow-hidden shadow-md border-2 border-main">
                <div class="w-100 bg-main flex items-center justify-between px-5 py-3">
                    <p class="text-white flex items-center gap-2"><i class="uil uil-bag"></i> PENGALAMAN</p>
                </div>
                <div id="experiences" class="w-full px-5 bg-white noise lg:rounded-none lg:rounded-2xl lg:rounded-b-2xl border-2 lg:border-0 border-header">
                    <div id="off-experiences" class="py-5 pb-6 text-center">
                        <p class="font-bold text-base text-main mb-3">Tambahkan pengalaman kamu disini!</p>
                        <p class="font-second text-black/80 text-sm font-medium px-2 lg:px-24 mb-5 lg:mb-2">Pengalaman merupakan jantung dari portfoliomu. Kamu dapat menambahkan pengalaman internship, parttime, fulltime, hingga pengalaman organisasi!</p>
                        <button id="button-experiences" class="flex items-center gap-1 bg-main text-white rounded-lg text-sm py-2 px-4 m-auto mt-4">Tambahkan Pengalaman</button>
                    </div>
                    <div id="on-experiences" class="hidden flex flex-col gap-4 pb-4 divide-y divide-gray-300">
                        
                    </div>
                </div>
            </div>

            <!-- PROFILE EDUCATIONS -->
            <div class="educations rounded-2xl overflow-hidden shadow-md border-2 border-main">
                <div class="w-100 bg-main flex items-center justify-between px-5 py-3">
                    <p class="text-white flex items-center gap-2"><i class="uil uil-graduation-cap"></i> PENDIDIKAN</p>
                </div>
                <div id="educations" class="w-full px-5 bg-white noise lg:rounded-none lg:rounded-2xl lg:rounded-b-2xl border-2 lg:border-0 border-header">
                    <div id="off-educations" class="text-center py-5">
                        <p class="font-bold text-base text-main mb-3">Tambahkan pendidikanmu disini!</p>
                        <p class="font-second text-black/80 text-sm font-medium px-2 lg:px-24 mb-5 lg:mb-2">Pendidikan dapat meningkatkan kapabilitas kamu di mata orang lain, beri tau semua orang apa yang kamu bisa!</p>
                        <button id="button-education" class="flex items-center gap-1 bg-main text-white rounded-lg text-sm py-2 px-4 m-auto mt-4">Tambahkan pendidikan</button>
                    </div>
                    <div id="on-educations" class="hidden flex flex-col gap-4 pb-4 divide-y divide-gray-300">
                        
                    </div>
                </div>
            </div>
        </div>

        <div class="hidden lg:flex flex-col gap-3">

            <!-- PROFILE SKILLS -->
            <div class="profile-skills rounded-2xl overflow-hidden shadow-md border-2 border-main">
                <div class="w-100 bg-white flex items-center justify-between px-4 py-3">
                    <p class="text-main flex items-center gap-2"><i class="uil uil-basketball"></i> KEAHLIAN</p>
                </div>
                <div id="profile-skills" class="w-full px-4 pb-6 noise bg-white border-2 lg:border-0 border-header lg:rounded-b-2xl">
                    <div id="off-skills" class="text-center">
                        <p class="font-bold text-base text-main mb-3">Tambahkan keahlian terbaikmu disini!</p>
                        <p class="font-second text-black/80 text-sm font-medium px-2 lg:px-24 mb-5 lg:mb-2">Keahlian yang kamu tambahkan, dapat membantu kami memberikan rekomondasi post yang mungkin cocok dengan profilmu</p>
                        <button id="button-profile-skills" class="flex items-center gap-1 bg-main text-white rounded-lg text-sm py-2 px-4 m-auto mt-4">Tambahkan Keahlian</button>
                    </div>
                    <div id="on-skills" class="">
                        <!-- HERE -->
                    </div>
                </div>
            </div>

            <!-- ATTACHMENT -->
            <div class="attachments bg-white border-main border-2 noise rounded-2xl p-4 pb-6 shadow-md">
                <div class="w-100 flex items-center justify-between rounded-t-2xl">
                    <p class="text-main flex items-center gap-2"><i class="uil uil-file-alt"></i> LAMPIRAN</p>
                </div>
                <div class="mt-4">
                    <div class="attachment-body-resume">
                        <a href="" class="resume block flex items-center justify-center bg-main text-white font-medium text-sm py-3 w-full mt-3 rounded-lg gap-2"><i class="uil uil-external-link-alt"></i> Lihat Curriculum Vitae (CV)</a>
                    </div>
                    <div class="mt-3 attachment-body-portfolio">
                        <a href="" class="portfolio block flex items-center justify-center bg-main text-white font-medium text-sm py-3 w-full mt-3 rounded-lg gap-2"><i class="uil uil-external-link-alt"></i> Lihat Portfolio</a>
                    </div>
                </div>
            </div>

            <!-- SOCIALS -->
            <div class="socials bg-white border-main border-2 noise rounded-2xl p-4 pb-5 shadow-md">
                <div class="w-100 flex items-center justify-between rounded-t-2xl">
                    <p class="text-main flex items-center gap-2"><i class="uil uil-share"></i> SOSIAL</p>
                </div>
                <p class="font-second text-sm font-semibold text-black/80 mt-3 mb-4">Kunjungi sosial media profil ini untuk berkoneksi lebih jauh!</p>
                <div id="" class="socials hidden flex items-center gap-4 text-thrid/80 text-4xl">
                    <a id="" href="" target="_blank" class="link-twitter hidden link-social"><i class="uil uil-twitter"></i></a>
                    <a id="" href="" target="_blank" class="link-instagram hidden link-social"><i class="uil uil-instagram-alt"></i></a>
                    <a id="" href="" target="_blank" class="link-linkedin hidden link-social"><i class="uil uil-linkedin"></i></a>
                    <a id="" href="" target="_blank" class="link-behance hidden link-social"><i class="uil uil-behance"></i></a>
                    <a id="" href="" target="_blank" class="link-github hidden link-social"><i class="uil uil-github"></i></a>
                    <a id="" href="" target="_blank" class="link-youtube hidden link-social"><i class="uil uil-youtube"></i></a>
                </div>
            </div>
        </div>
    </div>

</section>



<%- include('./layouts/footer'); -%>

<script>
    // Get User untuk initialisasi data di page ini

    const USER_ID = location.href.split("/profile/").pop()

    $.ajax({
        url: `/api/v1/users/${USER_ID}`,
        type: 'get',
        dataType: 'json',
        headers: {
            "Authorization": window.USER_TOKEN,
        },
        success: async function (userData) {
            const data = decrypt(userData.r);
            document.title = `Menampilkan profile ${data.firstname} ${data?.lastname}`            

            // Inisialisasi Attachment
            InitAttachment(data.attachments)

            // Inisialisasi Socials
            InitSocials(data.socials)
            
            // Inisialisasi basic information
            InitBasic(data)

            // Inisialisasi summary
            InitSummary(data)

            // Inisialisasi Experiences
            InitExperiences(data.experiences)
            
            // Inisialisasi Educations
            InitEducations(data.educations)

            // Inisialisasi Skills
            InitSkills(data.skills)






            if(data.experiences.length !== 0){     
                // Editing Experiences
                $(".popup-experiences").on("click", ".update-experience-button", function(){
                    const ID = $(this).next().text()
                    const EXPERIENCE = data.experiences.find(experience => experience.id == ID)
                    $("#registered-experience").addClass("hidden")
                    $("#editing-experience").removeClass("hidden")
                    document.getElementById("popup-experiences-s").scrollTo(0, 0);
                    
                    $("#editing-experience input[name=exp_position]").val(EXPERIENCE.exp_position)
                    $("#editing-experience input[name=exp_orgname]").val(EXPERIENCE.exp_orgname)
                    $("#editing-experience select[name=exp_type]").val(EXPERIENCE.exp_type)
                    $("#editing-experience select[name=exp_time]").val(EXPERIENCE.exp_time)
                    $("#editing-experience input[name=exp_startdate]").val(EXPERIENCE.exp_startdate)
                    if(EXPERIENCE.exp_enddate){
                        $("#editing-experience input[name=exp_enddate]").val(EXPERIENCE.exp_enddate)
                    } else{
                        $("#editing-experience input[name=exp_enddate]").prop("disabled", true)
                        $("#editing-experience input[type=checkbox]").prop("checked", true)
                    }
                    $("#editing-experience select[name=exp_status]").val(EXPERIENCE.exp_status)
                    $("#editing-experience input[name=exp_location]").val(EXPERIENCE.exp_location)
                    $("#editing-experience textarea[name=exp_description]").val(EXPERIENCE.exp_description)

                    $("#editing-experience input[type=checkbox]").change(function(){
                        if($(this).is(":checked")){
                            $("#editing-experience input[name=exp_enddate]").prop("disabled", true)
                            $("#editing-experience input[name=exp_enddate]").val("")
                        }else{
                            $("#editing-experience input[name=exp_enddate]").prop("disabled", false)
                        }
                    })

                    $(".cancle-edit").click(function(){
                        $(this).closest("#editing-experience").addClass("hidden")
                        $("#registered-experience").removeClass("hidden")
                        document.getElementById("popup-experiences-s").scrollTo(0, 0);
                    })

                    // UPDATE
                    PutUserData("form-editing-experience", `/api/v1/users/info/experiences/${ID}`, function(dis, response){
                        $("#editing-experience").addClass("hidden")
                        $("#registered-experience").removeClass("hidden")
                        $(dis).closest('.popup').slideToggle(function(){
                            $(dis).closest('#popup').fadeOut()
                        })
                        InitExperiences(response)
                        $(`#form-editing-experience`).trigger("reset");
                        $("body").removeClass('no-scroll');
                    })
                })
            }
        
            if(data.educations.length !== 0){
                const EDUCATIONS = data.educations
                // Editing Education
                $("#popup").on("click", ".update-education-button", function(){
                    $("#registered-education").addClass("hidden")
                    $("#editing-education").removeClass("hidden")
                    document.getElementById("popup-educations-s").scrollTo(0, 0);
                    
                    const CARD_EDUCATION_ID = $(this).next().text()
                    let obj = EDUCATIONS.find(edu => edu.id === CARD_EDUCATION_ID)
                    $("#editing-education input[name=edu_program]").val(obj.edu_program)
                    $("#editing-education input[name=edu_institution]").val(obj.edu_institution)
                    $("#editing-education select[name=edu_type]").val(obj.edu_type)
                    $("#editing-education input[name=edu_gpa]").val(obj.edu_gpa)
                    $("#editing-education input[name=edu_startdate]").val(obj.edu_startdate)
                    $("#editing-education input[name=edu_enddate]").val(obj.edu_enddate)
                    $("#editing-education input[name=edu_status]").val(obj.edu_status)
                    $("#editing-education input[name=edu_location]").val(obj.edu_location)
                    $("#editing-education textarea[name=edu_description]").val(obj.edu_description)

                    $(".cancle-edit").click(function(){
                        $(this).closest("#editing-education").addClass("hidden")
                        $("#registered-education").removeClass("hidden")
                        document.getElementById("popup-educations-s").scrollTo(0, 0);
                    })
                    
                    // UPDATE
                    PutUserData("form-editing-education", `/api/v1/users/info/educations/${CARD_EDUCATION_ID}`, function(dis, response){
                        $("#adding-new-educations").addClass("hidden")
                        $("#registered-educations").removeClass("hidden")
                        $(dis).closest('.popup').slideToggle(function(){
                            $(dis).closest('#popup').fadeOut()
                        })
                        InitEducations(response)
                        $(`#form-editing-education`).trigger("reset");
                        $("body").removeClass('no-scroll');
                    })
                })
            }
        },
    });
    
    $(".close-x").click(function(){
        $(this).closest('.popup').slideToggle(function(){
            $(this).closest('#popup').fadeOut()
        })
        $("body").removeClass('no-scroll');
    })

    $(".experiences, .educations").on("click", ".button-readmore", function(){
        const content = $(this).closest(".content")
        content.addClass("hidden")
        content.prev().removeClass("hidden")
    })



    function InitBasic(data){
        $(".firstname").text(data.firstname)

        $("#basic-profile-pic").prop("src", data.profile_picture)
        $("#navbar-fullname").text(`${data.firstname} ${data?.lastname}`)

        $("#basic-fullname").text(`${data.firstname ? data.firstname : ""} ${data.lastname ? data.lastname : ""}`)
        $("#basic-email").text(data.email)
        $("#basic-headline").text(data.headline)
        $("#basic-mobile").html(data.config.show_phone == true ? data.mobile ? data.mobile : "no data" : "<p class='text-red-500 italic'>disembunyikan</p>")
        $("#basic-sex").text(data.sex ? data.sex : "no data")
        $("#basic-birthdate").html(data.config.show_birthday == true ? data.date_of_birth ? data.date_of_birth : "no data" : "<p class='text-red-500 italic'>disembunyikan</p>")
        $("#basic-domicile").text(data.domicile ? data.domicile : "no data")
    }

    function InitSummary(data){
        if(data.summary){
            $("#off-summary").addClass("hidden")
            $("#on-summary").removeClass("hidden")
            $("#popup-summary-textarea").val(data.summary)
            document.getElementById('profile-summary-text').innerHTML = data.summary.replace(/\n/g, '<br/>');
        }else{
            $("#off-summary").removeClass("hidden")
            $("#on-summary").addClass("hidden")
        }
    }

    function InitAttachment(data){
        if(data){
            if(!data.atc_resume) $(".resume").remove()
            if(!data.atc_portfolio) $(".portfolio").remove()
            $(".portfolio").prop("href", data.atc_portfolio ? data.atc_portfolio : "#")
            $(".resume").prop("href", data.atc_resume ? data.atc_resume : "#")
        }
    }

    function InitSocials(data){
        $(".link-social").addClass("hidden")
        if(data){
            $(".socials").removeClass("hidden")
            if(data.twitter){
                $("#popup-social-twitter").val(data.twitter)
                $(".link-twitter").removeClass("hidden").prop("href",data.twitter)
            }
            if(data.instagram){
                $("#popup-social-instagram").val(data.instagram)
                $(".link-instagram").removeClass("hidden").prop("href",data.instagram)
            }
            if(data.linkedin){
                $("#popup-social-linkedin").val(data.linkedin)
                $(".link-linkedin").removeClass("hidden").prop("href",data.linkedin)
            }
            if(data.behance){
                $("#popup-social-behance").val(data.behance)
                $(".link-behance").removeClass("hidden").prop("href",data.behance)
            }
            if(data.github){
                $("#popup-social-github").val(data.github)
                $(".link-github").removeClass("hidden").prop("href",data.github)
            }
            if(data.youtube){
                $("#popup-social-youtube").val(data.youtube)
                $(".link-youtube").removeClass("hidden").prop("href",data.youtube)
            }
        }else{
            $(".socials").addClass("hidden")
        }
    }
    
    function InitExperiences(data){
        if(data.length <= 0){
            $("#on-experiences").addClass("hidden")
            $("#off-experiences").removeClass("hidden")
        }else{
            $("#off-experiences").addClass("hidden")
            $("#on-experiences").removeClass("hidden")
            $("#on-experiences").html("")
            $("#popup-body-experiences").html("")
            data.forEach((experienceData) => {
                let paragraph = experienceData.exp_description.substring(0,200).split('\n')
                $("#on-experiences").append(`
                    <div class="experience w-full py-5">
                        <div class="lg:flex justify-between items-start">
                            <div class="">
                                <p class="mb-1 text-sm bg-main/60 px-2 w-max text-white">${experienceData.exp_type}</p>
                                <p class="text-xl font-semibold">${experienceData.exp_position.length > 50 ? experienceData.exp_position.substring(0,50)+".." : experienceData.exp_position}</p>
                                <div class="flex items-center font-medium lg:font-normal gap-1 text-black/70 text-sm lg:text-base">
                                    <p>${experienceData.exp_orgname ? experienceData.exp_orgname.substring(0,25)+".." : experienceData.exp_orgname} • ${experienceData.exp_time} • ${experienceData.exp_status} (${experienceData.exp_location})</p>
                                </div>
                            </div>
                            <div class="lg:text-right flex lg:block items-center gap-2 mt-1 lg:m-0">
                                <p class="text-xs lg:text-sm">${formatDateMonth(experienceData.exp_startdate)} - ${experienceData.exp_enddate?formatDateMonth(experienceData.exp_enddate):"Now"}</p>
                                <p class="text-xs text-black/60">${calculateMonthDifference(experienceData.exp_startdate, experienceData.exp_enddate?experienceData.exp_enddate:getFormattedDate()).toUpperCase()}</p>
                            </div>
                        </div>
                        <!-- BODY -->
                        <p class="mt-3 hidden">${experienceData.exp_description.replace(/\n/g, '<br/>')}</p>
                        <p class="mt-3 content">${experienceData.exp_description.length > 210 ? `${experienceData.exp_description.replace(/\n/g, '<br/>').substring(0,210)}... <button class="button-readmore text-sm text-main">Read More</button>` : experienceData.exp_description.replace(/\n/g, '<br/>')}</p>
                    </div>
                `)
            })
        }
    }

    function InitEducations(data){
        if(data.length <= 0){
            $("#on-educations").addClass("hidden")
            $("#off-educations").removeClass("hidden")
        }else{
            $("#off-educations").addClass("hidden")
            $("#on-educations").removeClass("hidden")
            $("#on-educations").html("")
            $("#popup-body-educations").html("")
            data.forEach((educationsData) => {
                let paragraph = educationsData.edu_description.substring(0,200).split('\n')
                $("#on-educations").append(`
                    <div class="experience w-full py-5">
                        <div class="lg:flex justify-between items-start">
                            <div class="">
                                <p class="mb-1 text-sm bg-main/60 px-2 w-max text-white">${educationsData.edu_type}</p>
                                <p class="text-xl font-semibold">${educationsData.edu_program.length > 50 ? educationsData.edu_program.substring(0,50)+".." : educationsData.edu_program}</p>
                                <div class="flex items-center font-medium lg:font-normal gap-1 text-black/70 text-sm lg:text-base">
                                    <p>${educationsData.edu_institution > 25 ? educationsData.edu_institution.substring(0,25)+".." : educationsData.edu_institution} • Nilai: ${educationsData.edu_gpa} • ${educationsData.edu_status} (${educationsData.edu_location})</p>
                                </div>
                            </div>
                            <div class="lg:text-right mt-1 lg:m-0 flex lg:block gap-2">
                                <p class="text-xs lg:text-sm">${formatDateMonth(educationsData.edu_startdate)} - ${educationsData.edu_enddate?formatDateMonth(educationsData.edu_enddate):"Now"}</p>
                                <p class="text-xs text-black/60">${calculateMonthDifference(educationsData.edu_startdate, educationsData.edu_enddate?educationsData.edu_enddate:getFormattedDate()).toUpperCase()}</p>
                            </div>
                        </div>
                        <!-- BODY -->
                        <p class="mt-3 hidden">${educationsData.edu_description.replace(/\n/g, '<br/>')}</p>
                        <p class="mt-3 content">${educationsData.edu_description.length > 210 ? `${educationsData.edu_description.replace(/\n/g, '<br/>').substring(0,210)}... <button class="button-readmore text-sm text-main">Read More</button>` : educationsData.edu_description.replace(/\n/g, '<br/>')}</p>
                    </div>
                `)
            })
        }
    }

    function InitSkills(data){
        if(data.length > 0){
            $("#on-skills").removeClass("hidden")
            $("#on-skills").html("")
            $("#off-skills").addClass("hidden")
            data.forEach(skill => {
                $("#on-skills").append(`<button type="button" class="m-1 text-black/80 px-4 py-1 rounded-lg bg-main text-white">${skill.skill}</button>`)
            })
        }else{
            $("#on-skills").addClass("hidden")
            $("#off-skills").removeClass("hidden")
        }
    }
    
   



    function calculateMonthDifference(startDate, endDate) {
        let start = new Date(startDate);
        let end = new Date(endDate);

        let yearDiff = end.getFullYear() - start.getFullYear();
        let monthDiff = end.getMonth() - start.getMonth();

        if (monthDiff < 0) {
            yearDiff -= 1;
            monthDiff += 12;
        }

        if (yearDiff === 0) {
            return `${monthDiff} Bulan`;
        } else if (yearDiff === 1) {
            return `1 Tahun ${monthDiff} Bulan`;
        } else {
            return `${yearDiff} Tahun ${monthDiff} Bulan`;
        }
    }

    function formatDateMonth(inputDate) {
        // Parse tanggal dalam format "YYYY-MM-DD"
        const dateParts = inputDate.split('-');
        const year = dateParts[0];
        const month = dateParts[1];
    
        // Daftar nama bulan
        const monthNames = [
            'Jan', 'Feb', 'Mar', 'Apr', 'Mei', 'Jun',
            'Jul', 'Agu', 'Sep', 'Okt', 'Nov', 'Des'
        ];
    
        // Konversi komponen bulan ke nama bulan
        const formattedMonth = monthNames[parseInt(month, 10) - 1];
    
        // Gabungkan komponen-komponen dalam format yang diinginkan
        const formattedDate = `${formattedMonth} ${year}`;
    
        return formattedDate;
    }

    function getFormattedDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0'); // Dapat ditambahkan 1 karena bulan dimulai dari 0.
        const day = String(today.getDate()).padStart(2, '0');
    
        const formattedDate = `${year}-${month}-${day}`;
        return formattedDate;
    }

    function decrypt(data, keys='<%= process.env.AES_KEYS %>'){
        let bytes = CryptoJS.AES.decrypt(data, keys)
        return JSON.parse(bytes.toString(CryptoJS.enc.Utf8))
    }

</script>